X-Account-Key: account5
X-UIDL: GmailId12844a8e496201c7
X-Mozilla-Status: 0000
X-Mozilla-Status2: 00000000
X-Mozilla-Keys:                                                                                 
Delivered-To: mlsubscriber.tech@csmining.org
Received: by 10.143.34.8 with SMTP id m8cs183428wfj;
        Wed, 28 Apr 2010 06:43:59 -0700 (PDT)
Received: by 10.87.48.34 with SMTP id a34mr4677192fgk.2.1272462238855;
        Wed, 28 Apr 2010 06:43:58 -0700 (PDT)
Return-Path: <bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org>
Received: from liszt.debian.org (liszt.debian.org [82.195.75.100])
        by mx.google.com with ESMTP id 22si9453881fkr.59.2010.04.28.06.43.58;
        Wed, 28 Apr 2010 06:43:58 -0700 (PDT)
Received-SPF: pass (google.com: manual fallback record for domain of bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org designates 82.195.75.100 as permitted sender) client-ip=82.195.75.100;
Authentication-Results: mx.google.com; spf=pass (google.com: manual fallback record for domain of bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org designates 82.195.75.100 as permitted sender) smtp.mail=bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org; dkim=neutral (body hash did not verify) header.i=@csmining.org
Received: from localhost (localhost [127.0.0.1])
	by liszt.debian.org (Postfix) with QMQP
	id CFADF13A4FA6; Wed, 28 Apr 2010 13:43:46 +0000 (UTC)
Old-Return-Path: <aspnair@csmining.org>
XChecker-Version: SpamAssassin 3.2.5 (2008-06-10) on liszt.debian.org
XLevel: 
XStatus: No, score=-10.0 required=4.0 tests=FOURLA,LDOSUBSCRIBER,
	LDO_WHITELIST,SARE_MSGID_LONG45 autolearn=failed version=3.2.5
X-Original-To: lists-debian-user@liszt.debian.org
Delivered-To: lists-debian-user@liszt.debian.org
Received: from localhost (localhost [127.0.0.1])
	by liszt.debian.org (Postfix) with ESMTP id 5A1D313A4D61
	for <lists-debian-user@liszt.debian.org>; Wed, 28 Apr 2010 13:43:40 +0000 (UTC)
X-Virus-Scanned: at lists.debian.org with policy bank en-ht
X-AmavisStatus: No, score=-6.007 tagged_above=-10000 required=5.3
	tests=[BAYES_00=-2, FOURLA=0.1, LDO_WHITELIST=-5,
	SARE_MSGID_LONG45=0.893] autolearn=ham
Received: from liszt.debian.org ([127.0.0.1])
	by localhost (lists.debian.org [127.0.0.1]) (amavisd-new, port 2525)
	with ESMTP id XR2iuJ-1EyiB for <lists-debian-user@liszt.debian.org>;
	Wed, 28 Apr 2010 13:43:29 +0000 (UTC)
X-policyd-weight: using cached result; rate: -6.9
Received: from mail-iw0-f179.google.com (mail-iw0-f179.google.com [209.85.223.179])
	by liszt.debian.org (Postfix) with ESMTP id 6DFA613A4A22
	for <debian-user@lists.debian.org>; Wed, 28 Apr 2010 13:43:29 +0000 (UTC)
Received: by iwn9 with SMTP id 9so10744914iwn.0
        for <debian-user@lists.debian.org>; Wed, 28 Apr 2010 06:43:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=csmining.org; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Mf/nA1jA+qwH4FeN0EULOAdO1JiYbR7ou2Yv9uuerAE=;
        b=YJRbA+g7HcBp0ZdQaOHP1ZNgZu22aL87jLJ4Y4/v5yhQ6w1CCSsYRVMbvnmd2PELyz
         +bgg97d1Z7E4nEw1sp7r/869hkJqHhJOz13A6isTt3uKZd4SoRxmGV5gpMQODbqESkWk
         3w718VkEAaJLxPbplwV6hXD4SThTyVSom2dtA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=csmining.org; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=cd9qn/+7qNQzu5QXAQ9QcYfa+Qjx4/5OBcn2vGC/CVHpbPJ60do9iU4zibbemF+n5/
         Wu7Tlkqm6FqrL9Of+ujjOrQrvWT7BhbjtbYt/KFX/erkg4DaIZyjAnHdyXFqIvhAPEL4
         AWSSpjM4dnSYxRKmXU+zRF7z+szZMMtYrPMuk=
MIME-Version: 1.0
Received: by 10.115.135.13 with SMTP id m13mr9131374wan.206.1272462203645; 
	Wed, 28 Apr 2010 06:43:23 -0700 (PDT)
Received: by 10.150.227.3 with HTTP; Wed, 28 Apr 2010 06:43:23 -0700 (PDT)
In-Reply-To: <4BD8337E.3020104@ccf.auth.gr>
References: <4BD8337E.3020104@ccf.auth.gr>
Date: Wed, 28 Apr 2010 19:13:23 +0530
Message-ID: <p2ld0bf7b0b1004280643kde8b73f1q3a496cfa6602cbb0@mail.csmining.org>
Subject: Re: 2.6.32-3 does not recognize PATA WD disk...
From: Anand Sivaram <aspnair@csmining.org>
To: debian Users ENG <debian-user@lists.debian.org>
Content-Type: text/plain; charset=ISO-8859-7
Content-Transfer-Encoding: quoted-printable
X-Rc-Virus: 2007-09-13_01
X-Rc-Spam: 2008-11-04_01
Resent-Message-ID: <i_e5zc1eNHF.A.Cb.SuD2LB@liszt>
Resent-From: debian-user@lists.debian.org
X-Mailing-List: <debian-user@lists.debian.org> archive/latest/575361
X-Loop: debian-user@lists.debian.org
List-Id: <debian-user.lists.debian.org>
List-Post: <mailto:debian-user@lists.debian.org>
List-Help: <mailto:debian-user-request@lists.debian.org?subject=help>
List-Subscribe: <mailto:debian-user-request@lists.debian.org?subject=subscribe>
List-Unsubscribe: <mailto:debian-user-request@lists.debian.org?subject=unsubscribe>
Precedence: list
Resent-Sender: debian-user-request@lists.debian.org
Resent-Date: Wed, 28 Apr 2010 13:43:46 +0000 (UTC)

This is not a kernel bug, but the way debian uses drivers.  There are
two different drivers in the kernel now.
Old ide drivers and newer pata drivers.  Old ide drivers are going to
get deprecated.
For some reason debian stock kernel is taking only ide drivers.  I
have seen this with both my desktop (ide amd74xx used, pata_amd is not
at all compiled) and laptop (both ide piix and pata ata_pii modules
are compiled, but ide piix used)
Because of that my hard drive is shown as /dev/hda instead of /dev/sda
with the debian stock kernel.

What I did was to compile a custom kernel by including only the pata driver=
s.
Now with this custom kernel everything is fine and consistent.

2010/4/28 =C3=E9=FE=F1=E3=EF=F2 =D0=DC=EB=EB=E1=F2 <gpall@ccf.auth.gr>:
> Hi to everybody!
>
> I =A0just got a WD caviar blue, with the classic IDE interface and tried =
to
> connect it to my debian squeeze pc which already has a WD SATA device, wh=
ere
> the OS lives.
>
> The problem is that 2.6.32-3 does not recognize the disk and although I'm
> not an expert, I tend to think that it is a kernel bug. I booted with
> 2.6.30-2-686 and it sees the disk:
> [ =A0 =A01.560374] hda: WDC WD3200AAJB-56R1A0, ATA DISK drive
>
> About the IDE controller, here's what lspci -v says:
>
> on both 2.6.30 =A0and 2.6.32 :
>
> 00:14.1 IDE interface: ATI Technologies Inc SB600 IDE (prog-if 8a [Master
> SecP PriP])
> =A0 =A0 =A0 Subsystem: Giga-byte Technology Gigabyte GA-MA69G-S3H Motherb=
oard
> =A0 =A0 =A0 =A0 =A0 =A0 =A0Flags: bus master, 66MHz, medium devsel, laten=
cy 32, IRQ 16
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0I/O ports at 01f0 [size=3D8]
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 I/O ports at 03f4 [si=
ze=3D1]
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 I/O ports=
 at 0170 [size=3D8]
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 I/O ports at 0374 [size=3D1]
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 I/O ports at f900 [size=3D16]
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Kernel driver in use:
> ATIIXP_IDE
> The only differences between lspci -v for 2.6.30 and 2.6.32 are the
> following:
> # diff 2.6.30-2-lspci 2.6.32-3-lspci
> 23c23
> < =A0 =A0 =A0 Kernel driver in use: pcieport-driver
> ---
>> =A0 =A0 =A0 Kernel driver in use: pcieport
> 38c38
> < =A0 =A0 =A0 Kernel driver in use: pcieport-driver
> ---
>> =A0 =A0 =A0 Kernel driver in use: pcieport
> 95d94
> < =A0 =A0 =A0 Kernel driver in use: piix4_smbus
>
> where the pcieport differences refer to
> 00:02.0 PCI bridge: ATI Technologies Inc RD790 PCI to PCI bridge (externa=
l
> gfx0 port A) (prog-if 00 [Normal decode])
> and
> 00:0a.0 PCI bridge: ATI Technologies Inc RD790 PCI to PCI bridge (PCI
> express gpp port F) (prog-if 00 [Normal decode])
>
> The lshw utility shows almost perfect match between 2.6.30 and 2.6.32 wit=
h
> the difference that under the ide section which is identical in both
> kernels:
>
> =A0 =A0 =A0 *-ide
> =A0 =A0 =A0 =A0 =A0 =A0description: IDE interface
> =A0 =A0 =A0 =A0 =A0 =A0product: SB600 IDE
> =A0 =A0 =A0 =A0 =A0 =A0vendor: ATI Technologies Inc
> =A0 =A0 =A0 =A0 =A0 =A0physical id: 14.1
> =A0 =A0 =A0 =A0 =A0 =A0bus info: pci@0000:00:14.1
> =A0 =A0 =A0 =A0 =A0 =A0version: 00
> =A0 =A0 =A0 =A0 =A0 =A0width: 32 bits
> =A0 =A0 =A0 =A0 =A0 =A0clock: 66MHz
> =A0 =A0 =A0 =A0 =A0 =A0capabilities: ide bus_master
> =A0 =A0 =A0 =A0 =A0 =A0configuration: driver=3DATIIXP_IDE latency=3D32
> =A0 =A0 =A0 =A0 =A0 =A0resources: irq:16 ioport:1f0(size=3D8) ioport:3f6
> ioport:170(size=3D8) ioport:376 ioport:f900(size=3D16)
> =A0 =A0 =A0 =A0 =A0*-ide
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 description: IDE Channel 0
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 physical id: 0
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 bus info: ide@0
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 logical name: ide0
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 clock: 66MHz
>
> but in 2.6.32 nothing disk relevant follows, where with 2.6.30, the disk
> section follows:
>
> =A0 =A0 =A0 =A0 =A0 =A0 *-disk
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0description: ATA Disk
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0product: WDC WD3200AAJB-56R1A0
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0vendor: Western Digital
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0physical id: 0
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0bus info: ide@0.0
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0logical name: /dev/hda
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0version: 01.03E01
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0serial: WD-WCAV2H175667
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0size: 298GiB (320GB)
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0capabilities: ata dma lba iordy smart =
security pm
> partitioned partitioned:dos
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0configuration: mode=3Dudma5 signature=
=3D08040000 smart=3Don
>
> bit strange, isn't it?
>
> Any ideas?
>
> As well as that, I can't report it via reportbug, because with: reportbug
> linux-image-2.6.32-3-686
> I always get
>
> Querying Debian BTS for reports on linux-2.6 (source)...
> Unable to connect to Debian BTS; continue [y|N|?]?
>
> after a couple of minutes...
>
> Giorgos
>
>


-- 
To UNSUBSCRIBE, email to debian-user-REQUEST@lists.debian.org 
with a subject of "unsubscribe". Trouble? Contact listmaster@lists.debian.org
Archive: http://lists.debian.org/p2ld0bf7b0b1004280643kde8b73f1q3a496cfa6602cbb0@mail.csmining.org


