X-Account-Key: account5
X-UIDL: GmailId12840c9bdd1b8f0e
X-Mozilla-Status: 0000
X-Mozilla-Status2: 00000000
X-Mozilla-Keys:                                                                                 
Delivered-To: mlsubscriber.tech@csmining.org
Received: by 10.143.34.8 with SMTP id m8cs149345wfj;
        Tue, 27 Apr 2010 12:41:22 -0700 (PDT)
Received: by 10.140.247.10 with SMTP id u10mr6586591rvh.42.1272397282595;
        Tue, 27 Apr 2010 12:41:22 -0700 (PDT)
Return-Path: <java-dev-bounces+mlsubscriber.tech=csmining.org@lists.apple.com>
Received: from bz3.apple.com (bz3.apple.com [17.254.13.38])
        by mx.google.com with ESMTP id 4si8638424pzk.80.2010.04.27.12.41.22;
        Tue, 27 Apr 2010 12:41:22 -0700 (PDT)
Received-SPF: pass (google.com: manual fallback record for domain of java-dev-bounces+mlsubscriber.tech=csmining.org@lists.apple.com designates 17.254.13.38 as permitted sender) client-ip=17.254.13.38;
Authentication-Results: mx.google.com; spf=pass (google.com: manual fallback record for domain of java-dev-bounces+mlsubscriber.tech=csmining.org@lists.apple.com designates 17.254.13.38 as permitted sender) smtp.mail=java-dev-bounces+mlsubscriber.tech=csmining.org@lists.apple.com
Received: from lists.apple.com (unknown [17.128.113.151])
	by bz3.apple.com (Postfix) with ESMTP id 55D811C31E666
	for <mlsubscriber.tech@csmining.org>; Tue, 27 Apr 2010 12:41:22 -0700 (PDT)
Received: from master.lists.apple.com (localhost [127.0.0.1])
	by lists.apple.com (Postfix) with ESMTP id 509F8272BDA6E
	for <mlsubscriber.tech@csmining.org>; Tue, 27 Apr 2010 12:41:22 -0700 (PDT)
X-Original-To: java-dev@lists.apple.com
Delivered-To: java-dev@lists.apple.com
Received: from relay2.apple.com (relay2.apple.com [17.128.113.32])
	by lists.apple.com (Postfix) with ESMTP id 967F3272BCBFC
	for <java-dev@lists.apple.com>; Tue, 27 Apr 2010 12:39:11 -0700 (PDT)
Received: from mail-in12.apple.com (mail-in.apple.com [17.254.13.10])
	by relay2.apple.com (Postfix) with ESMTP id 83DD5D282991
	for <java-dev@lists.apple.com>; Tue, 27 Apr 2010 12:39:11 -0700 (PDT)
X-AuditID: 11fe0d0a-b7c42ae000006518-8f-4bd73d5dcc16
Authentication-Results: mail-in12.apple.com x-tls.subject="/C=GB/2.5.4.17=S9
	2WL/ST=South Yorkshire/L=Sheffield/2.5.4.9=Terry
	Street/2.5.4.18=PO BOX 3704/O=PlusNet plc/OU=Comodo PremiumSSL
	Wildcard/CN=*.plus.net"; auth=fail (cipher=RC4-SHA)
Received: from relay.pcl-ipout02.plus.net (relay.pcl-ipout02.plus.net
	[212.159.7.100]) (using TLS with cipher RC4-SHA (RC4-SHA/128 bits))
	(Client CN "*.plus.net", Issuer "UTN-USERFirst-Hardware" (not verified))
	by mail-in12.apple.com (Apple Secure Mail Relay) with SMTP id
	1A.4A.25880.E5D37DB4; Tue, 27 Apr 2010 12:39:11 -0700 (PDT)
X-IronPort-AntiFiltered: true
X-IronPort-AntiResult: Ag4MAPfZ1kvUnw4R/2dsb2JhbACDF40rhC6HYnGwG5EvgSWBMoFKbQQ
Received: from pih-relay04.plus.net ([212.159.14.17])
	by relay.pcl-ipout02.plus.net with ESMTP; 27 Apr 2010 20:39:09 +0100
Received: from [80.229.13.61] (helo=nightfall.local)
	by pih-relay04.plus.net with esmtp (Exim) id 1O6qcf-0005ot-4R
	for java-dev@lists.apple.com; Tue, 27 Apr 2010 20:39:09 +0100
Message-ID: <4BD73D5C.3060307@leafdigital.com>
Date: Tue, 27 Apr 2010 20:39:08 +0100
From: sam <sam@leafdigital.com>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-GB;
	rv:1.9.1.9) Gecko/20100317 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-dev@lists.apple.com
References: <m2l61b5d9411004261830n54bf7609pee74edcccd0c756f@mail.csmining.org>
In-Reply-To: <m2l61b5d9411004261830n54bf7609pee74edcccd0c756f@mail.csmining.org>
X-Enigmail-Version: 1.0.1
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Plusnet-Relay: fc3ca08a2a86700749a26516f1dd92fc
X-Brightmail-Tracker: AAAABBPYxHIT2NebE9kAkBPZq30=
Subject: Re: Don't be too quick to assume that -XX:+UseCompressedOops is a
 good 	thing
X-BeenThere: java-dev@lists.apple.com
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: "This list is for technical discussions related to Java on Mac OS X."
	<java-dev.lists.apple.com>
List-Unsubscribe: <http://lists.apple.com/mailman/listinfo/java-dev>,
	<mailto:java-dev-request@lists.apple.com?subject=unsubscribe>
List-Post: <mailto:java-dev@lists.apple.com>
List-Help: <mailto:java-dev-request@lists.apple.com?subject=help>
List-Subscribe: <http://lists.apple.com/mailman/listinfo/java-dev>,
	<mailto:java-dev-request@lists.apple.com?subject=subscribe>
Sender: java-dev-bounces+mlsubscriber.tech=csmining.org@lists.apple.com
Errors-To: java-dev-bounces+mlsubscriber.tech=csmining.org@lists.apple.com

On 27/04/2010 02:30, Benson Margulies wrote:
> A quick benchmark of some CPU-intensive code of ours shows a quite marked
> slowdown with that option turned on.

(Not disagreeing with the general point.)

For what it's worth, I've been running Eclipse (on 10.6, 64-bit) with
the UseCompressedOoops option for months now - if anyone recalls, Apple
fixed the issue with the default garbage collector so that it now
automatically chooses one that doesn't crash with that option - and it's
very fast.

Of course, I only have my work computer to compare it against (which is
a Pentium 4 PC, with a hard drive that appears to have some kind of
identity issue, since it obviously thinks it's a C64 cassette) - but
still, I don't notice any performance problems.

Also note, I'm sure the behaviour is different on different benchmarks.
I did a quick search and found two benchmarks:

http://www.matsim.org/book/export/html/330
http://blog.juma.me.uk/tag/compressed-oops/

As it happens, both these show a performance win for the option, but
these are only two samples. I'm sure certain usage patterns are indeed
noticeably slower so I agree, if using CPU-critical code where
performance is a concern, it's probably best to work out a repeatable
test and try both options. Just saying, 'assuming' is never a good idea,
but don't assume it'll be slower either. :)

--sam
 _______________________________________________
Do not post admin requests to the list. They will be ignored.
Java-dev mailing list      (Java-dev@lists.apple.com)
Help/Unsubscribe/Update your Subscription:
http://lists.apple.com/mailman/options/java-dev/mlsubscriber.tech%40csmining.org

This email sent to mlsubscriber.tech@csmining.org

